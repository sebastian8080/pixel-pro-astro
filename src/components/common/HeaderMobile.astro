---
// src/components/common/HeaderMobile.astro
---
<header class="bg-white fixed shadow-md py-4 md:hidden z-50 w-full">
    <div class="container mx-auto flex justify-between items-center px-4">
        <a href="/" class="flex items-center text-xl font-bold text-blue-700">
            <img width="120" height="100" src="/assets/img/nuevo-logo-pixel-pro.webp" alt="Logo de Pixel Pro" title="Logo de Pixel Pro">
        </a>
        <button id="mobile-menu-button" class="text-gray-700 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 p-2 rounded-md">
            <svg class="h-6 w-6 fill-current" viewBox="0 0 24 24">
                <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h16a1 1 0 110 2H4a1 1 0 01-1-1zm0 6a1 1 0 011-1h16a1 1 0 110 2H4a1 1 0 01-1-1zm0 6a1 1 0 011-1h16a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
            </svg>
        </button>
    </div>

    <!-- Overlay: z-index menor que el menú -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black/40 z-40 hidden transition-opacity duration-300"></div>

    <!-- Menú: z-index mayor que el overlay -->
    <nav id="mobile-menu" class="fixed inset-y-0 right-0 w-64 bg-white shadow-lg py-8 transform translate-x-full transition-transform ease-in-out duration-300 z-50">
        <div class="flex justify-end pr-6 pb-4">
            <button id="close-mobile-menu" class="text-gray-700 hover:text-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 p-2 rounded-md">
                <svg class="h-6 w-6 fill-current" viewBox="0 0 24 24">
                    <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L12 10.586l6.293-6.293a1 1 0 111.414 1.414L13.414 12l6.293 6.293a1 1 0 01-1.414 1.414L12 13.414l-6.293 6.293a1 1 0 01-1.414-1.414L10.586 12 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                </svg>
            </button>
        </div>
        <ul class="flex flex-col items-start space-y-4 px-6">
            <li><a href="/" class="block text-gray-800 hover:text-blue-700 text-lg font-semibold py-2 transition-colors">Inicio</a></li>
            <li><a href="/servicios" class="block text-gray-800 hover:text-blue-700 text-lg font-semibold py-2 transition-colors">Servicios</a></li>
            <li><a href="/nosotros" class="block text-gray-800 hover:text-blue-700 text-lg font-semibold py-2 transition-colors">Nosotros</a></li>
            <li><a href="/blog" class="block text-gray-800 hover:text-blue-700 text-lg font-semibold py-2 transition-colors">Blog</a></li>
            <li><a href="/contacto" class="block text-gray-800 hover:text-blue-700 text-lg font-semibold py-2 transition-colors">Contacto</a></li>
            <li><a href="/contacto" class="bg-blue-600 text-white font-bold py-2.5 px-6 rounded-full hover:bg-blue-700 transition duration-300 shadow-md mt-4 block w-max mx-auto md:mx-0">Solicitar Presupuesto</a></li>
        </ul>
    </nav>
</header>

<script>
    // Funcionalidad del menú móvil
    document.addEventListener('DOMContentLoaded', function() {
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
        const closeMobileMenu = document.getElementById('close-mobile-menu');

        function openMenu() {
            mobileMenu.classList.remove('translate-x-full');
            mobileMenuOverlay.classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function closeMenu() {
            mobileMenu.classList.add('translate-x-full');
            mobileMenuOverlay.classList.add('hidden');
            document.body.style.overflow = '';
        }

        // Abrir menú
        mobileMenuButton?.addEventListener('click', openMenu);

        // Cerrar menú con el botón X
        closeMobileMenu?.addEventListener('click', closeMenu);

        // Cerrar menú al hacer clic en el overlay
        mobileMenuOverlay?.addEventListener('click', closeMenu);

        // Cerrar menú al hacer clic en un enlace
        const menuLinks = mobileMenu?.querySelectorAll('a');
        menuLinks?.forEach(link => {
            link.addEventListener('click', closeMenu);
        });

        // Cerrar menú con ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape' && !mobileMenuOverlay.classList.contains('hidden')) {
                closeMenu();
            }
        });
    });
</script>